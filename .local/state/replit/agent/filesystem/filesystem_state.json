{"file_contents":{"replit.md":{"content":"# Minecraft Tebex Store Project\n\n## Overview\nA professional, fully-featured Minecraft store built with Tebex Headless API. Features dynamic configuration system, live Minecraft server status, package images from Tebex, and beautiful mcfleet-inspired glassy design with lime green accents.\n\n## Project Structure\n- **app.config.js** - **MAIN CONFIGURATION FILE** (git-ignored, edit this to customize your store)\n- **app.config.example.js** - Example configuration file (copy to app.config.js)\n- **index.html** - Main store page\n- **template/** - All customizable templates\n  - **styles/main.css** - Complete styling with lime green theme and glowing effects\n  - **scripts/main.js** - Store functionality with dynamic config loading\n  - **pages/** - Success and cancel pages\n  - **assets/** - Logo and image assets\n- **server/** - Backend API modules\n  - **config-api.js** - Configuration management\n  - **server-status.js** - Minecraft server query (deprecated, moved to vite.config.js)\n- **attached_assets/** - User-uploaded images (background, etc.)\n- **vite.config.js** - Vite configuration with API endpoints\n- **package.json** - Dependencies and scripts\n\n## Technology Stack\n- **Vite** - Build tool and dev server with API middleware\n- **Tebex.js** - Embedded checkout integration\n- **Tebex Headless API** - Product management and basket creation\n- **minecraft-server-util** - Minecraft server status queries\n- **Vanilla JavaScript** - No framework dependencies for maximum performance\n\n## Recent Changes\n*2025-11-08* - Enhanced checkout and authentication features:\n- **Custom username modal** - Replaced browser prompt with themed modal matching website design\n- **Discord integration** - Top corner button showing live member count from Discord server\n- **Login system** - User authentication with localStorage persistence\n- **Saved username** - Login remembers your Minecraft username for faster checkout\n- **Improved UX** - All modals use website theme with glassmorphic design\n\n*2025-11-08* - Earlier UI/UX improvements:\n- **Category-based navigation** - Categories shown first, click to view packages within\n- **Back button** - Easy navigation between categories and packages view\n- **Top Customer daily section** - Displays top spender with avatar and amount\n- **Giftcard Balance section** - Gift card code validation interface\n- **Enhanced glassy design** - More transparent, refined glass effect on all cards\n- **Smaller, compact cards** - Optimized card sizes (140px minimum width)\n- **Improved checkout error handling** - Better user feedback for checkout issues\n- **Mobile responsive** - All new sections adapt perfectly to mobile screens\n\n*2025-11-08* - Earlier updates:\n- **app.config.js system** - Centralized configuration for easy customization\n- **Live server status** - Real-time Minecraft player count display\n- **Package images** - Automatic image loading from Tebex packages\n- **Dynamic config loading** - API endpoints serve config at runtime\n- **New background** - Beautiful Minecraft night scene\n- **Fixed basket reuse issue** - Fresh basket created for each checkout\n- **Prevented duplicate event handlers** - Single registration for Tebex events\n\n## Key Features\n\n### 1. Dynamic Configuration System\nAll store settings can be edited in `app.config.js`:\n```javascript\nexport const config = {\n  public: {\n    storeName: 'MC STORE',          // Your store name\n    serverIp: 'play.yourserver.com', // Your Minecraft server\n    serverPort: 25565,               // Query port\n    discordLink: '...',              // Discord invite\n    discordId: '...',                // Discord ID\n    assets: { ... },                 // Paths to images\n    urls: { ... },                   // Success/cancel URLs\n    tebex: { publicToken: '...' }    // Tebex public API key\n  },\n  private: {\n    tebex: { privateKey: '...' }     // Keep secret!\n  }\n};\n```\n\n### 2. API Endpoints\n- **GET /api/config** - Returns public configuration (never exposes private keys)\n- **GET /api/server-status** - Returns Minecraft server status with 30s cache\n\n### 3. Minecraft Server Integration\n- Queries server every 30 seconds\n- Shows online/offline status with colored dot\n- Displays current player count (e.g., \"12/100 online\")\n- Graceful fallback when server is offline\n\n### 4. Category Navigation\n- Categories displayed first on main page\n- Click any category to view its packages\n- Back button to return to category view\n- Smooth transitions between views\n- Category cards show package count\n\n### 5. Package Display\n- Fetches images directly from Tebex API\n- Falls back to emoji icons if no image\n- Compact card design (140px min width)\n- Glowing hover effects with multiple colors\n\n### 6. Top Customer Daily\n- Displays top daily spender\n- Shows Minecraft player avatar\n- Username and purchase amount\n- Glassy card with hover effects\n\n### 7. Giftcard Balance\n- Input field for gift card codes\n- Check button for validation\n- User feedback on results\n- Ready for backend integration\n\n### 8. Shopping Cart & Checkout\n- Local cart management\n- Custom username modal with website theme (replaces browser prompt)\n- Fresh basket created for each checkout attempt\n- Basket invalidated on cart changes (add/remove items)\n- Tebex.js embedded checkout\n- Improved error handling with clear messages\n- Event handlers registered once (no duplicates)\n- Username saved for logged-in users\n\n### 9. User Authentication\n- Login modal with email-based authentication\n- User session saved in localStorage\n- Persistent login across page refreshes\n- Logout functionality with confirmation\n- Username auto-populated for logged-in users\n- Login status displayed in top corner button\n\n### 10. Discord Integration\n- Live member count displayed from Discord API\n- Click to join Discord server\n- Auto-refreshes every 5 minutes\n- Fallback to \"Join\" if API unavailable\n- Positioned in top corner for easy access\n\n## Design Features\n- **Background**: Minecraft night scene with overlay (configurable)\n- **Colors**: Lime green (#84cc16) primary with purple, orange, blue accent glows\n- **Effects**: Frosted glass cards, floating logo animation, glowing product cards\n- **Layout**: Centered vertical design with responsive grid\n- **Typography**: Apple system fonts for clean, professional look\n\n## Configuration Guide\n\n### Quick Start\n1. Copy `app.config.example.js` to `app.config.js`\n2. Edit `app.config.js` with your details\n3. Add your Tebex public token\n4. Run `npm run dev`\n\n### Customization Options\n- **Store Name**: Change `storeName` in config\n- **Server Status**: Update `serverIp` and `serverPort`\n- **Discord Integration**: Update `discordId` with your Discord invite code (e.g., 'abc123xyz')\n- **Discord Link**: Set `discordLink` to your Discord invite URL\n- **Background**: Change `assets.backgroundImage` path\n- **Logo**: Add image to `template/assets/logo.png`\n- **Colors**: Edit CSS variables in `template/styles/main.css`\n\n## Security Notes\n- ‚ö†Ô∏è `app.config.js` is git-ignored to protect API keys\n- ‚ö†Ô∏è Only public config is exposed via `/api/config`\n- ‚ö†Ô∏è Private keys stay server-side and never sent to browser\n- ‚ö†Ô∏è Use environment variables in production deployments\n\n## API Configuration\nEnvironment variables (used if present):\n- **VITE_TEBEX_PUBLIC_TOKEN** - Overrides config file public token\n- **VITE_TEBEX_PRIVATE_KEY** - Overrides config file private key\n\n## Development\n- Run: `npm run dev` on port 5000\n- Build: `npm run build`\n- Server configured with allowed hosts for Replit environment\n- API endpoints served via Vite middleware plugin\n\n## User Preferences\n- Design Style: mcfleet.net inspired, professional Minecraft store aesthetic\n- Theme: Dark mode with lime green accents and multi-color glows\n- Configuration: File-based (`app.config.js`) for easy non-technical editing\n- Template Organization: All editable files clearly organized\n- Background: User-provided Minecraft night scene\n- Package Display: Compact cards with Tebex images\n\n## Technical Implementation\n\n### Config Loading Flow\n1. Frontend requests `/api/config` on page load\n2. Vite middleware serves `config.public` from `app.config.js`\n3. JavaScript applies config (store name, background, server IP)\n4. Config never exposes private keys to browser\n\n### Server Status Flow\n1. Frontend requests `/api/server-status` on load and every 30s\n2. Vite middleware queries Minecraft server via `minecraft-server-util`\n3. Results cached for 30s to avoid server overload\n4. Returns player count, online status, version, MOTD\n\n### Checkout Flow\n1. User adds packages to cart (stored locally)\n2. Click checkout ‚Üí Always create fresh basket via Tebex API\n3. Add all cart items to basket\n4. Launch Tebex.js embedded checkout\n5. On cancel/close ‚Üí Reset basket reference\n6. On cart change ‚Üí Invalidate basket\n\n## Troubleshooting\n\n### Configuration Not Loading\n- Ensure `app.config.js` exists (copy from `app.config.example.js`)\n- Check browser console for API errors\n- Restart dev server after config changes\n\n### Server Status Shows Offline\n- Verify correct `serverIp` and `serverPort` in config\n- Ensure Minecraft server has `enable-query=true`\n- Check firewall allows query port connections\n\n### Package Images Missing\n- Add images to packages in Tebex creator panel\n- Wait 5-10 minutes for Tebex cache update\n- Hard refresh browser (Ctrl+Shift+R)\n\n## Dependencies\n- `@tebexio/tebex.js` - Embedded checkout\n- `minecraft-server-util` - Server status queries\n- `vite` - Build tool and dev server\n\n## License\nFree to use and customize for Minecraft server stores.\n","size_bytes":9535},"app.config.example.js":{"content":"export const config = {\n  public: {\n    storeName: \"MC STORE\",\n    serverIp: \"play.yourserver.com\",\n    serverPort: 25565,\n    discordLink: \"https://discord.gg/yourserver\",\n    discordId: \"YourDiscordServer\",\n\n    assets: {\n      backgroundImage:\n        \"/attached_assets/febd862108d5aea0b5874cb846c4fca0_1762605406041.jpg\",\n      logo: \"/template/assets/logo.png\",\n    },\n\n    theme: {\n      enableHalloween: false,\n      enableChristmas: false,\n    },\n\n    urls: {\n      completeUrl: \"/success\",\n      cancelUrl: \"/cancel\",\n    },\n\n    tebex: {\n      publicToken:\n        process.env.VITE_TEBEX_PUBLIC_TOKEN || \"your_tebex_public_token_here\",\n    },\n  },\n\n  private: {\n    tebex: {\n      privateKey:\n        process.env.VITE_TEBEX_PRIVATE_KEY ||\n        \"your_tebex_private_key_here_keep_secret\",\n    },\n  },\n};\n\nexport default config;\n","size_bytes":839},"README.md":{"content":"# Minecraft Tebex Store\n\nA professional Minecraft store built with the Tebex Headless API featuring a dark theme inspired by top Minecraft stores, dynamic configuration, live server status, and beautiful glowing effects.\n\n## Features\n\n- üé® **Professional Design** - Inspired by top Minecraft stores with glowing effects\n- üåô **Dark Theme** - Beautiful dark mode with lime green accents\n- üñºÔ∏è **Custom Background** - Beautiful Minecraft night scene background\n- ‚öôÔ∏è **Easy Configuration** - Edit everything from `app.config.js` file\n- üìä **Live Server Status** - Shows real-time player count from your Minecraft server\n- üõí **Shopping Cart** - Seamless cart experience with Tebex.js embedded checkout\n- üñºÔ∏è **Package Images** - Displays images directly from your Tebex packages\n- üí≥ **Secure Payments** - Powered by Tebex payment processing\n- üì± **Responsive** - Works perfectly on all devices\n- ‚ö° **Fast & Modern** - Built with Vite for optimal performance\n\n## Quick Setup\n\n### 1. Configure Your Store\n\nCopy the example config file and edit it with your details:\n\n```bash\ncp app.config.example.js app.config.js\n```\n\nThen edit `app.config.js` with your favorite text editor:\n\n```javascript\nexport const config = {\n  public: {\n    // Your store name (appears in header)\n    storeName: 'MY AWESOME SERVER',\n    \n    // Your Minecraft server details (for live player count)\n    serverIp: 'play.myserver.com',\n    serverPort: 25565,  // Default Minecraft port\n    \n    // Discord integration (links in footer)\n    discordLink: 'https://discord.gg/myserver',\n    discordId: 'MyDiscordServer',\n    \n    // Custom images\n    assets: {\n      // Path to background image (you can use the provided one or add your own)\n      backgroundImage: '/attached_assets/febd862108d5aea0b5874cb846c4fca0_1762605406041.jpg',\n      // Path to your store logo (add your logo to template/assets/logo.png)\n      logo: '/template/assets/logo.png'\n    },\n    \n    // Success/cancel page URLs\n    urls: {\n      completeUrl: '/success',\n      cancelUrl: '/cancel'\n    },\n    \n    // Tebex public token\n    tebex: {\n      // Get this from https://creator.tebex.io Settings ‚Üí API Keys\n      publicToken: 'your_tebex_public_token_here'\n    }\n  },\n  \n  // KEEP THIS SECTION PRIVATE! Never share these keys\n  private: {\n    tebex: {\n      // Tebex private key (for future features - not currently used)\n      privateKey: ''\n    }\n  }\n};\n```\n\n### 2. Get Your Tebex API Token\n\n1. Log in to your [Tebex Creator Panel](https://creator.tebex.io)\n2. Go to **Settings** ‚Üí **API Keys**\n3. Copy your **Public Token**\n4. Paste it into `app.config.js` under `tebex.publicToken`\n\n### 3. Add Your Logo (Optional)\n\nIf you want a custom logo:\n\n1. Prepare your logo image (PNG recommended, transparent background)\n2. Save it to `template/assets/logo.png`\n3. The logo will automatically appear in the store header\n\n### 4. Run the Store\n\n```bash\nnpm install\nnpm run dev\n```\n\nYour store will be available at `http://localhost:5000`\n\n## Configuration Guide\n\n### Store Name and Branding\n\n```javascript\nstoreName: 'MY SERVER STORE'\n```\n\nChanges the store name that appears in the header and browser tab.\n\n### Server Integration\n\n```javascript\nserverIp: 'play.myserver.com',\nserverPort: 25565\n```\n\nThe store will automatically query your Minecraft server and display:\n- ‚úÖ Green dot when server is online\n- ‚ùå Red dot when server is offline\n- üë• Current player count (e.g., \"12/100 online\")\n\n**Note:** Your Minecraft server must have `query` enabled in `server.properties`:\n\n```properties\nenable-query=true\nquery.port=25565\n```\n\n### Discord Integration\n\n```javascript\ndiscordLink: 'https://discord.gg/myserver',\ndiscordId: 'MyAwesomeServer'\n```\n\nThese settings are used for Discord integration (currently in footer, can be extended).\n\n### Custom Images\n\n#### Background Image\n\n```javascript\nbackgroundImage: '/path/to/your/background.jpg'\n```\n\nYou can use:\n- The provided Minecraft night scene\n- Your own custom background (add to `attached_assets/` folder)\n- Any public URL\n\n#### Store Logo\n\n```javascript\nlogo: '/template/assets/logo.png'\n```\n\nAdd your custom logo to this path. Recommended size: 200x200px PNG with transparent background.\n\n### Package Images\n\nPackage images are automatically fetched from Tebex! When you add an image to a package in your Tebex creator panel:\n\n1. Go to your Tebex package settings\n2. Upload an image\n3. The image will automatically appear in your store\n\n**Image Specifications:**\n- Recommended size: 512x512px\n- Format: PNG with transparent background\n- Displays at 80x80px with glow effect\n\n## Customization\n\n### Colors and Theme\n\nEdit `template/styles/main.css` to change colors:\n\n```css\n:root {\n  --lime-primary: #84cc16;     /* Main accent color */\n  --lime-light: #a3e635;       /* Light accent */\n  --lime-dark: #65a30d;        /* Dark accent */\n  \n  /* Change these to your server's brand colors */\n  --purple-glow: rgba(147, 51, 234, 0.6);\n  --orange-glow: rgba(249, 115, 22, 0.6);\n}\n```\n\n### Package Card Size\n\nPackages are displayed in compact cards. To adjust spacing:\n\n```css\n.packages-container {\n  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));\n  gap: 1rem;\n}\n```\n\nChange `160px` to make cards wider or narrower.\n\n### Layout and Structure\n\n- **Header**: Edit `index.html` (lines 15-40)\n- **Footer**: Edit `index.html` (lines 50-70)\n- **Product Cards**: Auto-generated from Tebex API\n- **Modal/Cart**: Edit `index.html` (lines 72-90)\n\n## How It Works\n\n### Configuration System\n\n1. **app.config.js** - Your editable configuration file (git-ignored for security)\n2. **API Endpoints** - Vite serves config via `/api/config` and server status via `/api/server-status`\n3. **Frontend** - Loads config on startup and applies settings dynamically\n\n### Server Status\n\n- Queries your Minecraft server every 30 seconds\n- Caches results to avoid overloading your server\n- Shows real-time player count\n- Gracefully handles server offline state\n\n### Tebex Integration\n\n1. **Fetch Products** - Gets categories and packages from Tebex API\n2. **Shopping Cart** - Local cart management\n3. **Checkout** - Creates Tebex basket and launches embedded checkout\n4. **Payment** - Tebex handles all payment processing\n5. **Delivery** - Items delivered automatically to player accounts\n\n## Troubleshooting\n\n### Products Not Loading\n\n**Problem:** Store shows \"No packages available\"\n\n**Solutions:**\n1. Check your Tebex public token in `app.config.js`\n2. Ensure packages are published in Tebex creator panel\n3. Check browser console (F12) for API errors\n\n### Server Status Shows Offline\n\n**Problem:** Green dot is red, shows \"Offline\"\n\n**Solutions:**\n1. Verify `serverIp` and `serverPort` in `app.config.js`\n2. Ensure your Minecraft server has `enable-query=true` in `server.properties`\n3. Check firewall allows connections to query port\n4. Test connection with a Minecraft server query tool\n\n### Package Images Not Showing\n\n**Problem:** Emoji icons instead of package images\n\n**Solutions:**\n1. Add images to your packages in Tebex creator panel\n2. Wait 5-10 minutes for Tebex cache to update\n3. Hard refresh the store (Ctrl+Shift+R)\n\n### Checkout Doesn't Work\n\n**Problem:** \"Failed to initiate checkout\" error\n\n**Solutions:**\n1. Verify Tebex public token is correct\n2. Check browser console for detailed errors\n3. Ensure packages are properly configured in Tebex\n4. Try clearing browser cache\n\n### Configuration Changes Not Appearing\n\n**Problem:** Edited `app.config.js` but changes don't show\n\n**Solutions:**\n1. Restart the development server (Ctrl+C, then `npm run dev`)\n2. Hard refresh your browser (Ctrl+Shift+R)\n3. Clear browser cache\n\n## Security\n\n### Important Security Notes\n\n‚ö†Ô∏è **app.config.js is git-ignored** - Your configuration file with API keys is not committed to version control.\n\n‚ö†Ô∏è **Never share your private Tebex key** - The `private` section of config is for server-side use only and never sent to browsers.\n\n‚ö†Ô∏è **Use environment variables in production** - For deployed sites, use environment variables instead of hardcoded tokens.\n\n### Production Deployment\n\nWhen deploying to production:\n\n1. Set environment variables:\n   - `VITE_TEBEX_PUBLIC_TOKEN` - Your Tebex public token\n   - `VITE_TEBEX_PRIVATE_KEY` - Your Tebex private key (if needed)\n\n2. Build the project:\n   ```bash\n   npm run build\n   ```\n\n3. Deploy the `dist` folder to your hosting service\n\n## Building for Production\n\n```bash\nnpm run build\n```\n\nThis creates an optimized production build in the `dist` folder.\n\n## API Endpoints\n\nThe store exposes these API endpoints:\n\n- `GET /api/config` - Public configuration (store name, colors, etc.)\n- `GET /api/server-status` - Minecraft server status and player count\n\n## Support\n\n- **Tebex Documentation**: [docs.tebex.io/developers](https://docs.tebex.io/developers)\n- **Tebex Support**: Contact through your creator panel\n- **Template Help**: Check comments in `app.config.js` and template files\n\n## License\n\nThis template is free to use and customize for your Minecraft server store.\n\n---\n\n**Made with ‚ù§Ô∏è for the Minecraft community**\n","size_bytes":9096},"template/styles/main.css":{"content":":root {\n  --lime-primary: #84cc16;\n  --lime-light: #a3e635;\n  --lime-dark: #65a30d;\n  --lime-glow: rgba(132, 204, 22, 0.5);\n  \n  --purple-glow: rgba(147, 51, 234, 0.6);\n  --blue-glow: rgba(59, 130, 246, 0.6);\n  --orange-glow: rgba(249, 115, 22, 0.6);\n  \n  --glass-bg: rgba(15, 23, 42, 0.85);\n  --glass-border: rgba(255, 255, 255, 0.15);\n  \n  --bg-dark: #0f172a;\n  --bg-overlay: rgba(15, 23, 42, 0.7);\n  --text-primary: #ffffff;\n  --text-secondary: #94a3b8;\n  \n  --shadow-glow: 0 0 30px;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n  background: var(--bg-dark);\n  color: var(--text-primary);\n  line-height: 1.6;\n  overflow-x: hidden;\n  min-height: 100vh;\n}\n\n.discord-corner-button {\n  position: fixed;\n  top: 20px;\n  left: 20px;\n  z-index: 1000;\n  animation: fadeInLeft 0.5s ease;\n}\n\n.login-corner-button {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  z-index: 1000;\n  animation: fadeInRight 0.5s ease;\n}\n\n@keyframes fadeInLeft {\n  from {\n    opacity: 0;\n    transform: translateX(-30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes fadeInRight {\n  from {\n    opacity: 0;\n    transform: translateX(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.discord-button,\n.login-button {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.25rem;\n  cursor: pointer;\n  transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: var(--text-primary);\n  font-family: inherit;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\n  will-change: transform;\n}\n\n.discord-button:hover,\n.login-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 10px 30px var(--lime-glow);\n  border-color: var(--lime-primary);\n}\n\n.discord-icon {\n  width: 24px;\n  height: 24px;\n  color: #5865F2;\n}\n\n.login-icon {\n  font-size: 1.25rem;\n}\n\n.discord-text,\n.login-text {\n  font-weight: 600;\n  font-size: 0.875rem;\n}\n\n.discord-count {\n  color: var(--lime-primary);\n  font-weight: 700;\n  font-size: 0.875rem;\n  margin-left: 0.25rem;\n}\n\n.login-button.logged-in {\n  border-color: var(--lime-primary);\n}\n\n.login-button.logged-in .login-text {\n  color: var(--lime-primary);\n}\n\n.background-image {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-image: url('/attached_assets/febd862108d5aea0b5874cb846c4fca0_1762605406041.jpg');\n  background-size: cover;\n  background-position: center;\n  background-attachment: fixed;\n  z-index: -2;\n}\n\n.background-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(180deg, rgba(15, 23, 42, 0.5) 0%, rgba(15, 23, 42, 0.7) 100%);\n  z-index: -1;\n}\n\n.glass-card {\n  backdrop-filter: blur(20px) saturate(180%);\n  -webkit-backdrop-filter: blur(20px) saturate(180%);\n  background: rgba(15, 23, 42, 0.35);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 16px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),\n              inset 0 1px 0 rgba(255, 255, 255, 0.15);\n}\n\n.container {\n  max-width: 900px;\n  margin: 0 auto;\n  padding: 0 20px 60px;\n}\n\n.main-header {\n  text-align: center;\n  padding: 2rem 0 1rem;\n  position: relative;\n}\n\n.logo-container {\n  margin-bottom: 1.5rem;\n}\n\n.logo-glow {\n  display: inline-block;\n  filter: drop-shadow(0 0 30px var(--lime-glow));\n  animation: float 3s ease-in-out infinite;\n}\n\n@keyframes float {\n  0%, 100% { transform: translateY(0px); }\n  50% { transform: translateY(-10px); }\n}\n\n.store-logo {\n  height: 200px;\n  width: auto;\n  object-fit: contain;\n}\n\n.store-logo-text {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.logo-icon {\n  font-size: 4rem;\n}\n\n.store-logo-text h1 {\n  font-size: 3rem;\n  font-weight: 900;\n  color: var(--lime-primary);\n  text-shadow: 0 0 30px var(--lime-glow),\n               0 0 60px var(--lime-glow);\n  letter-spacing: 2px;\n}\n\n.server-info {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  padding: 1rem 2rem;\n  max-width: 500px;\n  margin: 0 auto;\n}\n\n.server-status {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: var(--text-secondary);\n}\n\n.status-dot {\n  width: 10px;\n  height: 10px;\n  background: var(--lime-primary);\n  border-radius: 50%;\n  box-shadow: 0 0 10px var(--lime-glow);\n  animation: pulse 2s ease-in-out infinite;\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.5; }\n}\n\n.cart-button {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: rgba(132, 204, 22, 0.1);\n  border: 1px solid var(--lime-primary);\n  padding: 0.5rem 1rem;\n  border-radius: 50px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n}\n\n.cart-button:hover {\n  background: rgba(132, 204, 22, 0.2);\n  box-shadow: 0 0 20px var(--lime-glow);\n}\n\n.cart-icon {\n  font-size: 1.25rem;\n}\n\n.cart-count {\n  background: var(--lime-primary);\n  color: var(--bg-dark);\n  font-weight: 700;\n  font-size: 0.75rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 50px;\n  min-width: 20px;\n  text-align: center;\n}\n\n.loading-state, .error-state {\n  text-align: center;\n  padding: 4rem 2rem;\n  color: var(--text-secondary);\n}\n\n.spinner {\n  width: 50px;\n  height: 50px;\n  border: 4px solid rgba(132, 204, 22, 0.2);\n  border-top-color: var(--lime-primary);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 1rem;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.packages-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 1rem;\n  margin: 2rem 0;\n}\n\n.back-button {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  background: rgba(132, 204, 22, 0.15);\n  border: none;\n  color: var(--lime-primary);\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-bottom: 1.5rem;\n  font-size: 0.95rem;\n  font-family: inherit;\n}\n\n.back-button:hover {\n  background: rgba(132, 204, 22, 0.25);\n  transform: translateX(-5px);\n  box-shadow: 0 0 20px var(--lime-glow);\n}\n\n.extra-sections {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 1.5rem;\n  margin: 3rem 0 2rem;\n}\n\n.top-customer-section,\n.giftcard-section {\n  padding: 1.5rem;\n}\n\n.section-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 1.25rem;\n  padding-bottom: 0.75rem;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.section-icon {\n  font-size: 1.5rem;\n  filter: drop-shadow(0 0 10px var(--lime-glow));\n}\n\n.section-header h3 {\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: var(--lime-primary);\n  margin: 0;\n}\n\n.top-customer-content {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.customer-item {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.75rem;\n  background: rgba(255, 255, 255, 0.03);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  transition: all 0.3s ease;\n}\n\n.customer-item:hover {\n  background: rgba(255, 255, 255, 0.05);\n  border-color: rgba(132, 204, 22, 0.3);\n}\n\n.customer-avatar {\n  width: 48px;\n  height: 48px;\n  border-radius: 8px;\n  border: 2px solid var(--lime-primary);\n  box-shadow: 0 0 15px var(--lime-glow);\n}\n\n.customer-info {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.customer-name {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n\n.customer-amount {\n  font-size: 0.875rem;\n  color: var(--lime-primary);\n  font-weight: 600;\n}\n\n.giftcard-content {\n  display: flex;\n  gap: 0.75rem;\n  margin-bottom: 1rem;\n}\n\n.giftcard-input {\n  flex: 1;\n  padding: 0.75rem 1rem;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 8px;\n  color: var(--text-primary);\n  font-size: 0.9rem;\n  transition: all 0.3s ease;\n  font-family: inherit;\n}\n\n.giftcard-input:focus {\n  outline: none;\n  border-color: var(--lime-primary);\n  background: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 0 15px var(--lime-glow);\n}\n\n.giftcard-input::placeholder {\n  color: var(--text-secondary);\n}\n\n.check-btn {\n  padding: 0.75rem 1.5rem;\n  background: linear-gradient(135deg, var(--lime-primary), var(--lime-light));\n  color: var(--bg-dark);\n  border: none;\n  border-radius: 8px;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 0.9rem;\n  text-transform: uppercase;\n  font-family: inherit;\n  white-space: nowrap;\n}\n\n.check-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 5px 20px var(--lime-glow);\n}\n\n.check-btn:active {\n  transform: translateY(0);\n}\n\n.giftcard-result {\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  color: var(--text-primary);\n  font-size: 0.9rem;\n}\n\n.giftcard-result.success {\n  border-color: var(--lime-primary);\n  background: rgba(132, 204, 22, 0.1);\n}\n\n.giftcard-result.error {\n  border-color: #ef4444;\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n}\n\n.category-card {\n  padding: 1.25rem 1rem;\n  text-align: center;\n  cursor: pointer;\n  position: relative;\n  transition: all 0.3s ease;\n  border: 2px solid transparent;\n  min-height: 140px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.category-card::before {\n  content: '';\n  position: absolute;\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  background: linear-gradient(135deg, var(--lime-primary), var(--lime-light));\n  border-radius: 16px;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  z-index: -1;\n}\n\n.category-card:hover::before {\n  opacity: 0.3;\n}\n\n.category-card:hover {\n  transform: translateY(-8px) scale(1.02);\n  box-shadow: var(--shadow-glow) var(--lime-glow);\n  border-color: rgba(132, 204, 22, 0.3);\n}\n\n.category-card:nth-child(3n+1):hover {\n  box-shadow: var(--shadow-glow) var(--purple-glow);\n}\n\n.category-card:nth-child(3n+2):hover {\n  box-shadow: var(--shadow-glow) var(--orange-glow);\n}\n\n.category-card:nth-child(3n+3):hover {\n  box-shadow: var(--shadow-glow) var(--lime-glow);\n}\n\n.category-icon {\n  font-size: 2.5rem;\n  margin-bottom: 0.75rem;\n  filter: drop-shadow(0 0 20px currentColor);\n}\n\n.category-name {\n  font-size: 1rem;\n  font-weight: 700;\n  margin-bottom: 0.35rem;\n  color: var(--text-primary);\n}\n\n.category-description {\n  color: var(--text-secondary);\n  font-size: 0.75rem;\n}\n\n.package-card {\n  padding: 0.9rem;\n  text-align: center;\n  cursor: default;\n  position: relative;\n  transition: all 0.3s ease;\n  border: 2px solid transparent;\n  min-height: 180px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.package-card::before {\n  content: '';\n  position: absolute;\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  background: linear-gradient(135deg, var(--lime-primary), var(--lime-light));\n  border-radius: 16px;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  z-index: -1;\n}\n\n.package-card:hover::before {\n  opacity: 0.3;\n}\n\n.package-card:hover {\n  transform: translateY(-5px);\n  box-shadow: var(--shadow-glow) var(--lime-glow);\n}\n\n.package-card:nth-child(3n+1):hover {\n  box-shadow: var(--shadow-glow) var(--purple-glow);\n}\n\n.package-card:nth-child(3n+2):hover {\n  box-shadow: var(--shadow-glow) var(--orange-glow);\n}\n\n.package-card:nth-child(3n+3):hover {\n  box-shadow: var(--shadow-glow) var(--lime-glow);\n}\n\n.package-icon {\n  font-size: 2.5rem;\n  margin-bottom: 0.6rem;\n  filter: drop-shadow(0 0 20px currentColor);\n}\n\n.package-icon.purple { color: #a855f7; }\n.package-icon.orange { color: #f97316; }\n.package-icon.lime { color: var(--lime-primary); }\n.package-icon.blue { color: #3b82f6; }\n.package-icon.red { color: #ef4444; }\n\n.package-image {\n  width: 65px;\n  height: 65px;\n  object-fit: contain;\n  margin: 0 auto 0.6rem;\n  filter: drop-shadow(0 0 15px rgba(132, 204, 22, 0.4));\n}\n\n.package-image-fallback {\n  font-size: 2.5rem;\n  margin-bottom: 0.6rem;\n  filter: drop-shadow(0 0 20px currentColor);\n}\n\n.package-name {\n  font-size: 0.95rem;\n  font-weight: 700;\n  margin-bottom: 0.4rem;\n  color: var(--text-primary);\n  line-height: 1.2;\n}\n\n.package-description {\n  display: none;\n}\n\n.package-price {\n  font-size: 0.9rem;\n  font-weight: 700;\n  color: var(--lime-primary);\n  margin-bottom: 0.6rem;\n}\n\n.add-to-cart-btn {\n  width: 100%;\n  background: linear-gradient(135deg, var(--lime-primary), var(--lime-light));\n  color: var(--bg-dark);\n  border: none;\n  padding: 0.55rem 0.8rem;\n  border-radius: 8px;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 0.7rem;\n  text-transform: uppercase;\n  margin-top: auto;\n}\n\n.add-to-cart-btn:hover {\n  transform: scale(1.05);\n  box-shadow: 0 0 20px var(--lime-glow);\n}\n\n.add-to-cart-btn:active {\n  transform: scale(0.98);\n}\n\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.85);\n  backdrop-filter: blur(10px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  animation: fadeIn 0.3s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n.modal-content {\n  max-width: 600px;\n  width: 100%;\n  max-height: 80vh;\n  overflow-y: auto;\n  padding: 2rem;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid var(--glass-border);\n}\n\n.modal-header h2 {\n  font-size: 1.75rem;\n  color: var(--lime-primary);\n}\n\n.close-button {\n  background: none;\n  border: none;\n  color: var(--text-primary);\n  font-size: 2rem;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: all 0.3s ease;\n}\n\n.close-button:hover {\n  background: rgba(255, 255, 255, 0.1);\n  transform: rotate(90deg);\n}\n\n.cart-items {\n  margin-bottom: 1.5rem;\n  min-height: 100px;\n}\n\n.cart-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 12px;\n  border: 1px solid var(--glass-border);\n}\n\n.cart-item-name {\n  font-weight: 600;\n  flex: 1;\n}\n\n.cart-item-price {\n  color: var(--lime-primary);\n  font-weight: 700;\n  margin: 0 1rem;\n}\n\n.remove-item {\n  background: rgba(239, 68, 68, 0.2);\n  color: #ef4444;\n  border: 1px solid rgba(239, 68, 68, 0.3);\n  padding: 0.5rem 1rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 0.875rem;\n}\n\n.remove-item:hover {\n  background: rgba(239, 68, 68, 0.3);\n}\n\n.cart-footer {\n  border-top: 1px solid var(--glass-border);\n  padding-top: 1.5rem;\n}\n\n.cart-total {\n  display: flex;\n  justify-content: space-between;\n  font-size: 1.5rem;\n  font-weight: 700;\n  margin-bottom: 1.5rem;\n}\n\n.cart-total span:last-child {\n  color: var(--lime-primary);\n}\n\n.checkout-button {\n  width: 100%;\n  background: linear-gradient(135deg, var(--lime-primary), var(--lime-light));\n  color: var(--bg-dark);\n  border: none;\n  padding: 1rem 2rem;\n  border-radius: 12px;\n  font-weight: 800;\n  font-size: 1.125rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  text-transform: uppercase;\n  box-shadow: 0 10px 30px var(--lime-glow);\n}\n\n.checkout-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 15px 40px var(--lime-glow);\n}\n\n.checkout-button:active {\n  transform: translateY(0);\n}\n\n.checkout-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.empty-cart {\n  text-align: center;\n  padding: 3rem 1rem;\n  color: var(--text-secondary);\n}\n\n.store-footer {\n  margin-top: 4rem;\n  text-align: center;\n}\n\n.footer-notice {\n  padding: 2rem;\n  margin-bottom: 2rem;\n  text-align: left;\n}\n\n.footer-notice p {\n  margin-bottom: 0.5rem;\n  color: var(--text-secondary);\n  font-size: 0.875rem;\n  line-height: 1.6;\n}\n\n.footer-notice p:first-child {\n  color: var(--lime-primary);\n  font-size: 1rem;\n}\n\n.footer-links {\n  display: flex;\n  justify-content: center;\n  gap: 2rem;\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n}\n\n.footer-link {\n  color: var(--text-secondary);\n  text-decoration: none;\n  font-size: 0.875rem;\n  transition: color 0.3s ease;\n}\n\n.footer-link:hover {\n  color: var(--lime-primary);\n}\n\n.payment-methods {\n  color: var(--text-secondary);\n  font-size: 0.875rem;\n  margin-top: 1rem;\n}\n\n.payment-methods strong {\n  color: var(--lime-primary);\n  margin-left: 0.25rem;\n}\n\n@media (max-width: 768px) {\n  .store-logo {\n    height: 150px;\n  }\n  \n  .store-logo-text h1 {\n    font-size: 2rem;\n  }\n  \n  .server-info {\n    flex-direction: column;\n    gap: 1rem;\n  }\n  \n  .packages-container {\n    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n    gap: 0.8rem;\n  }\n  \n  .category-card {\n    min-height: 120px;\n    padding: 1rem 0.75rem;\n  }\n  \n  .category-icon {\n    font-size: 2rem;\n    margin-bottom: 0.5rem;\n  }\n  \n  .category-name {\n    font-size: 0.9rem;\n  }\n  \n  .package-card {\n    min-height: 160px;\n    padding: 0.75rem;\n  }\n  \n  .package-icon {\n    font-size: 2rem;\n    margin-bottom: 0.5rem;\n  }\n  \n  .package-image {\n    width: 55px;\n    height: 55px;\n  }\n  \n  .package-name {\n    font-size: 0.85rem;\n  }\n  \n  .package-description {\n    font-size: 0.65rem;\n    min-height: 24px;\n  }\n  \n  .package-price {\n    font-size: 0.85rem;\n  }\n  \n  .add-to-cart-btn {\n    font-size: 0.65rem;\n    padding: 0.5rem 0.6rem;\n  }\n  \n  .back-button {\n    font-size: 0.85rem;\n    padding: 0.6rem 1.2rem;\n  }\n  \n  .extra-sections {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n    margin: 2rem 0 1.5rem;\n  }\n  \n  .top-customer-section,\n  .giftcard-section {\n    padding: 1.25rem;\n  }\n  \n  .section-header h3 {\n    font-size: 1rem;\n  }\n  \n  .customer-avatar {\n    width: 40px;\n    height: 40px;\n  }\n  \n  .customer-name {\n    font-size: 0.9rem;\n  }\n  \n  .customer-amount {\n    font-size: 0.8rem;\n  }\n  \n  .giftcard-content {\n    flex-direction: column;\n    gap: 0.6rem;\n  }\n  \n  .check-btn {\n    width: 100%;\n    padding: 0.7rem 1rem;\n  }\n  \n  .footer-links {\n    gap: 1rem;\n  }\n}\n\n.notification {\n  position: fixed;\n  top: 100px;\n  right: 20px;\n  background: linear-gradient(135deg, var(--lime-primary), var(--lime-light));\n  color: var(--bg-dark);\n  padding: 1rem 2rem;\n  border-radius: 12px;\n  font-weight: 600;\n  z-index: 3000;\n  box-shadow: 0 10px 30px var(--lime-glow);\n  animation: slideIn 0.3s ease;\n}\n\n@keyframes slideIn {\n  from {\n    transform: translateX(400px);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n@keyframes slideOut {\n  from {\n    transform: translateX(0);\n    opacity: 1;\n  }\n  to {\n    transform: translateX(400px);\n    opacity: 0;\n  }\n}\n\n.username-modal,\n.login-modal {\n  max-width: 500px;\n}\n\n.username-modal-body,\n.login-modal-body {\n  padding: 1rem 0;\n}\n\n.username-modal-body p,\n.login-modal-body p {\n  color: var(--text-secondary);\n  margin-bottom: 1.5rem;\n  font-size: 0.95rem;\n  line-height: 1.5;\n}\n\n.username-input,\n.login-input {\n  width: 100%;\n  padding: 1rem 1.25rem;\n  background: rgba(255, 255, 255, 0.05);\n  border: 2px solid rgba(255, 255, 255, 0.15);\n  border-radius: 12px;\n  color: var(--text-primary);\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  font-family: inherit;\n  margin-bottom: 1.5rem;\n}\n\n.username-input:focus,\n.login-input:focus {\n  outline: none;\n  border-color: var(--lime-primary);\n  background: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 0 20px var(--lime-glow);\n}\n\n.username-input::placeholder,\n.login-input::placeholder {\n  color: var(--text-secondary);\n}\n\n.username-actions,\n.login-actions {\n  display: flex;\n  gap: 1rem;\n}\n\n.username-cancel-btn,\n.login-cancel-btn {\n  flex: 1;\n  padding: 0.875rem 1.5rem;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 10px;\n  color: var(--text-primary);\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-family: inherit;\n  font-size: 1rem;\n}\n\n.username-cancel-btn:hover,\n.login-cancel-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.3);\n}\n\n.username-submit-btn,\n.login-submit-btn {\n  flex: 1;\n  padding: 0.875rem 1.5rem;\n  background: linear-gradient(135deg, var(--lime-primary), var(--lime-light));\n  color: var(--bg-dark);\n  border: none;\n  border-radius: 10px;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-family: inherit;\n  font-size: 1rem;\n  text-transform: uppercase;\n}\n\n.username-submit-btn:hover,\n.login-submit-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 10px 30px var(--lime-glow);\n}\n\n.username-submit-btn:active,\n.login-submit-btn:active {\n  transform: translateY(0);\n}\n\n.login-note {\n  font-size: 0.8rem;\n  color: var(--text-secondary);\n  margin-top: 1rem;\n  text-align: center;\n  font-style: italic;\n}\n\n@media (max-width: 768px) {\n  .discord-corner-button {\n    top: 10px;\n    left: 10px;\n  }\n\n  .login-corner-button {\n    top: 10px;\n    right: 10px;\n  }\n\n  .discord-button,\n  .login-button {\n    padding: 0.6rem 1rem;\n  }\n\n  .discord-icon {\n    width: 20px;\n    height: 20px;\n  }\n\n  .login-icon {\n    font-size: 1.1rem;\n  }\n\n  .discord-text,\n  .discord-count,\n  .login-text {\n    font-size: 0.8rem;\n  }\n\n  .username-modal,\n  .login-modal {\n    max-width: 90%;\n  }\n\n  .username-input,\n  .login-input {\n    padding: 0.875rem 1rem;\n    font-size: 0.95rem;\n  }\n\n  .username-actions,\n  .login-actions {\n    flex-direction: column;\n    gap: 0.75rem;\n  }\n\n  .username-cancel-btn,\n  .login-cancel-btn,\n  .username-submit-btn,\n  .login-submit-btn {\n    padding: 0.75rem 1rem;\n    font-size: 0.95rem;\n  }\n}\n\n.modal-server-type-selector {\n  display: flex;\n  gap: 0.75rem;\n  margin-bottom: 1.5rem;\n}\n\n.modal-server-type-btn {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  padding: 0.875rem 1rem;\n  background: rgba(255, 255, 255, 0.05);\n  border: 2px solid rgba(255, 255, 255, 0.15);\n  border-radius: 10px;\n  color: var(--text-secondary);\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-family: inherit;\n  font-size: 0.875rem;\n  will-change: transform;\n}\n\n.modal-server-type-btn:hover {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.25);\n  transform: translateY(-2px);\n}\n\n.modal-server-type-btn.active {\n  background: linear-gradient(135deg, var(--lime-primary), var(--lime-light));\n  color: var(--bg-dark);\n  border-color: var(--lime-primary);\n  box-shadow: 0 4px 15px var(--lime-glow);\n}\n\n.server-type-icon {\n  font-size: 1.2rem;\n  filter: grayscale(0.5);\n  transition: filter 0.3s ease;\n}\n\n.modal-server-type-btn.active .server-type-icon {\n  filter: grayscale(0);\n}\n\n.modal-info-text {\n  color: var(--text-secondary);\n  font-size: 0.875rem;\n  margin-bottom: 1rem;\n  text-align: center;\n}\n\n.logout-modal {\n  max-width: 450px;\n  animation: modalSlideIn 0.3s ease;\n}\n\n.logout-modal-body {\n  padding: 1.5rem;\n  text-align: center;\n}\n\n.logout-modal-body p {\n  margin-bottom: 1rem;\n  color: var(--text-primary);\n  font-size: 1rem;\n}\n\n.logout-username {\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n  margin-top: 0.5rem;\n}\n\n.logout-username span {\n  color: var(--lime-primary);\n  font-weight: 700;\n}\n\n.logout-actions {\n  display: flex;\n  gap: 1rem;\n  margin-top: 1.5rem;\n}\n\n.logout-cancel-btn,\n.logout-confirm-btn {\n  flex: 1;\n  padding: 0.875rem 1.5rem;\n  border-radius: 10px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-family: inherit;\n  font-size: 1rem;\n  border: none;\n}\n\n.logout-cancel-btn {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  color: var(--text-primary);\n}\n\n.logout-cancel-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.3);\n}\n\n.logout-confirm-btn {\n  background: linear-gradient(135deg, #ef4444, #dc2626);\n  color: white;\n}\n\n.logout-confirm-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 10px 30px rgba(239, 68, 68, 0.4);\n}\n\n.product-desc-modal {\n  max-width: 600px;\n  animation: modalSlideIn 0.3s ease;\n}\n\n.product-desc-body {\n  padding: 1.5rem;\n  max-height: 500px;\n  overflow-y: auto;\n}\n\n.product-desc-content {\n  color: var(--text-secondary);\n  line-height: 1.8;\n  font-size: 0.95rem;\n  margin-bottom: 1.5rem;\n}\n\n.product-desc-content h1,\n.product-desc-content h2,\n.product-desc-content h3 {\n  color: var(--text-primary);\n  margin: 1rem 0 0.5rem;\n}\n\n.product-desc-content ul,\n.product-desc-content ol {\n  margin-left: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.product-desc-content li {\n  margin-bottom: 0.5rem;\n}\n\n.product-desc-close-btn {\n  width: 100%;\n  padding: 0.875rem;\n  background: linear-gradient(135deg, var(--lime-primary), var(--lime-light));\n  color: var(--bg-dark);\n  border: none;\n  border-radius: 10px;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-family: inherit;\n  font-size: 1rem;\n  text-transform: uppercase;\n}\n\n.product-desc-close-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 10px 30px var(--lime-glow);\n}\n\n.package-info-btn {\n  position: absolute;\n  top: 0.5rem;\n  right: 0.5rem;\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  background: rgba(132, 204, 22, 0.2);\n  border: 2px solid var(--lime-primary);\n  color: var(--lime-primary);\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.9rem;\n  z-index: 2;\n}\n\n.package-info-btn:hover {\n  background: var(--lime-primary);\n  color: var(--bg-dark);\n  transform: scale(1.1);\n  box-shadow: 0 0 15px var(--lime-glow);\n}\n\nbody.theme-halloween {\n  --lime-primary: #ff6b35;\n  --lime-light: #ff8c5a;\n  --lime-dark: #ff4500;\n  --lime-glow: rgba(255, 107, 53, 0.5);\n}\n\nbody.theme-halloween .background-overlay {\n  background: linear-gradient(135deg, rgba(15, 23, 42, 0.85), rgba(51, 17, 0, 0.8));\n}\n\nbody.theme-halloween .glass-card {\n  background: rgba(51, 17, 0, 0.6);\n  backdrop-filter: blur(20px);\n  border: 1px solid rgba(255, 107, 53, 0.3);\n}\n\n.halloween-particle {\n  position: fixed;\n  pointer-events: none;\n  z-index: 1;\n  animation: halloweenFloat 10s linear infinite;\n  opacity: 0.7;\n}\n\n@keyframes halloweenFloat {\n  0% {\n    transform: translateY(100vh) translateX(0) rotate(0deg);\n    opacity: 0;\n  }\n  10% {\n    opacity: 0.7;\n  }\n  90% {\n    opacity: 0.7;\n  }\n  100% {\n    transform: translateY(-10vh) translateX(50px) rotate(360deg);\n    opacity: 0;\n  }\n}\n\n.halloween-bat {\n  font-size: 2rem;\n  filter: drop-shadow(0 0 10px rgba(255, 107, 53, 0.6));\n}\n\nbody.theme-christmas {\n  --lime-primary: #22c55e;\n  --lime-light: #4ade80;\n  --lime-dark: #16a34a;\n  --lime-glow: rgba(34, 197, 94, 0.5);\n}\n\nbody.theme-christmas .background-overlay {\n  background: linear-gradient(135deg, rgba(15, 23, 42, 0.85), rgba(0, 51, 102, 0.7));\n}\n\nbody.theme-christmas .glass-card {\n  background: rgba(0, 51, 102, 0.6);\n  backdrop-filter: blur(20px);\n  border: 1px solid rgba(34, 197, 94, 0.3);\n}\n\n.snowflake {\n  position: fixed;\n  top: -10px;\n  color: #fff;\n  font-size: 1.2rem;\n  pointer-events: none;\n  z-index: 1;\n  animation: snowfall linear infinite;\n  opacity: 0.8;\n  text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);\n}\n\n@keyframes snowfall {\n  0% {\n    transform: translateY(0) translateX(0) rotate(0deg);\n    opacity: 0;\n  }\n  10% {\n    opacity: 0.8;\n  }\n  90% {\n    opacity: 0.8;\n  }\n  100% {\n    transform: translateY(100vh) translateX(50px) rotate(360deg);\n    opacity: 0;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .snowflake,\n  .halloween-particle {\n    animation: none;\n    display: none;\n  }\n}\n\n.cart-gift-option {\n  padding: 1rem 1.5rem;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.gift-checkbox-label {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  cursor: pointer;\n  color: var(--text-primary);\n  font-weight: 600;\n}\n\n.gift-checkbox {\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  accent-color: var(--lime-primary);\n}\n\n.gift-recipient-section {\n  margin-top: 1rem;\n  animation: slideDown 0.3s ease;\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.gift-recipient-input {\n  width: 100%;\n  padding: 0.875rem 1rem;\n  background: rgba(255, 255, 255, 0.05);\n  border: 2px solid rgba(255, 255, 255, 0.15);\n  border-radius: 10px;\n  color: var(--text-primary);\n  font-family: inherit;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n}\n\n.gift-recipient-input:focus {\n  outline: none;\n  border-color: var(--lime-primary);\n  box-shadow: 0 0 0 3px rgba(132, 204, 22, 0.1);\n  background: rgba(255, 255, 255, 0.08);\n}\n\n.gift-recipient-input::placeholder {\n  color: var(--text-secondary);\n}\n\n@media (max-width: 768px) {\n  .modal-server-type-selector {\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n\n  .modal-server-type-btn {\n    padding: 0.75rem;\n    font-size: 0.85rem;\n  }\n\n  .logout-modal,\n  .product-desc-modal {\n    max-width: 90%;\n  }\n\n  .logout-actions {\n    flex-direction: column;\n    gap: 0.75rem;\n  }\n\n  .product-desc-body {\n    max-height: 400px;\n    padding: 1rem;\n  }\n  \n  .cart-gift-option {\n    padding: 1rem;\n  }\n}\n","size_bytes":29200},"attached_assets/content-1762605099658.md":{"content":"Please enable cookies.\n\n\n## What happened?\n\nThe owner of this website (store.mcfleet.net) has banned the autonomous system number (ASN) your IP address is in (22773) from accessing this website.\n\nPlease see\n[https://developers.cloudflare.com/support/troubleshooting/http-status-codes/cloudflare-1xxx-errors/error-1005/](https://developers.cloudflare.com/support/troubleshooting/http-status-codes/cloudflare-1xxx-errors/error-1005/)\nfor more details.\n\n\nWas this page helpful?\n\nYes\n\nNo\n\n\nThank you for your feedback!\n\n\nCloudflare Ray ID: **99b51ad768b32fdf**‚Ä¢\nYour IP:\nClick to reveal195.64.125.109‚Ä¢Performance & security by [Cloudflare](https://www.cloudflare.com/5xx-error-landing)","size_bytes":685},"vite.config.js":{"content":"import { defineConfig } from 'vite';\nimport { resolve, dirname } from 'path';\nimport { fileURLToPath } from 'url';\nimport config from './app.config.js';\nimport { status } from 'minecraft-server-util';\n\nconst __dirname = dirname(fileURLToPath(import.meta.url));\n\nlet cachedStatus = null;\nlet lastFetch = 0;\nconst CACHE_DURATION = 30000;\n\nlet cachedTopCustomer = null;\nlet topCustomerLastFetch = 0;\nconst TOP_CUSTOMER_CACHE = 300000;\n\nlet cachedCartCalculations = new Map();\nconst CART_CACHE_DURATION = 30000;\n\nasync function getServerStatus() {\n  const now = Date.now();\n  \n  if (cachedStatus && (now - lastFetch) < CACHE_DURATION) {\n    return cachedStatus;\n  }\n  \n  try {\n    const response = await status(config.public.serverIp, config.public.serverPort, { timeout: 5000 });\n    \n    cachedStatus = {\n      online: true,\n      players: {\n        online: response.players.online,\n        max: response.players.max\n      },\n      version: response.version.name,\n      motd: response.motd.clean || response.motd.raw\n    };\n    \n    lastFetch = now;\n    return cachedStatus;\n  } catch (error) {\n    console.error('Server status error:', error.message);\n    \n    cachedStatus = {\n      online: false,\n      players: {\n        online: 0,\n        max: 0\n      },\n      error: error.message\n    };\n    \n    lastFetch = now;\n    return cachedStatus;\n  }\n}\n\nasync function validateGiftCard(code) {\n  try {\n    const response = await fetch(`https://plugin.tebex.io/gift-cards/lookup/${code}`, {\n      headers: {\n        'X-Tebex-Secret': config.private.tebex.privateKey\n      }\n    });\n    \n    if (!response.ok) {\n      if (response.status === 404) {\n        return { valid: false, error: 'Gift card not found' };\n      }\n      return { valid: false, error: 'Failed to validate gift card' };\n    }\n    \n    const data = await response.json();\n    return {\n      valid: true,\n      balance: data.balance || 0,\n      currency: data.currency || 'USD'\n    };\n  } catch (error) {\n    console.error('Gift card validation error:', error);\n    return { valid: false, error: 'Failed to validate gift card' };\n  }\n}\n\nasync function calculateCartTotal(packages) {\n  const cacheKey = packages.map(p => `${p.id}-${p.quantity || 1}`).sort().join('|');\n  const now = Date.now();\n  \n  const cached = cachedCartCalculations.get(cacheKey);\n  if (cached && (now - cached.timestamp) < CART_CACHE_DURATION) {\n    cached.timestamp = now;\n    return cached.data;\n  }\n  \n  try {\n    const basketResponse = await fetch(`https://headless.tebex.io/api/accounts/${config.public.tebex.publicToken}/baskets`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({\n        username: 'temp_user',\n        return_url: config.public.urls.completeUrl,\n        cancel_url: config.public.urls.cancelUrl\n      })\n    });\n    \n    if (!basketResponse.ok) {\n      throw new Error('Failed to create basket');\n    }\n    \n    const basket = await basketResponse.json();\n    const basketIdent = basket.data.ident;\n    \n    for (const pkg of packages) {\n      await fetch(`https://headless.tebex.io/api/baskets/${basketIdent}/packages`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          package_id: pkg.id,\n          quantity: pkg.quantity || 1\n        })\n      });\n    }\n    \n    const finalBasketResponse = await fetch(`https://headless.tebex.io/api/accounts/${config.public.tebex.publicToken}/baskets/${basketIdent}`, {\n      headers: {\n        'Accept': 'application/json'\n      }\n    });\n    \n    if (!finalBasketResponse.ok) {\n      throw new Error('Failed to fetch basket totals');\n    }\n    \n    const finalBasket = await finalBasketResponse.json();\n    const result = {\n      subtotal: finalBasket.data.base_price || 0,\n      tax: finalBasket.data.sales_tax || 0,\n      total: finalBasket.data.total_price || 0,\n      currency: finalBasket.data.currency || 'USD'\n    };\n    \n    cachedCartCalculations.set(cacheKey, {\n      data: result,\n      timestamp: now\n    });\n    \n    if (cachedCartCalculations.size > 50) {\n      const oldestKey = cachedCartCalculations.keys().next().value;\n      cachedCartCalculations.delete(oldestKey);\n    }\n    \n    return result;\n  } catch (error) {\n    console.error('Cart calculation error:', error);\n    return null;\n  }\n}\n\nasync function getTopCustomer() {\n  const now = Date.now();\n  \n  if (cachedTopCustomer && (now - topCustomerLastFetch) < TOP_CUSTOMER_CACHE) {\n    return cachedTopCustomer;\n  }\n  \n  try {\n    const response = await fetch('https://plugin.tebex.io/payments?paged=1&limit=100', {\n      headers: {\n        'X-Tebex-Secret': config.private.tebex.privateKey\n      }\n    });\n    \n    if (!response.ok) {\n      throw new Error('Failed to fetch payments');\n    }\n    \n    const data = await response.json();\n    const payments = data.data || [];\n    \n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    const dailyTotals = {};\n    \n    payments.forEach(payment => {\n      const paymentDate = new Date(payment.date);\n      paymentDate.setHours(0, 0, 0, 0);\n      \n      if (paymentDate.getTime() === today.getTime() && payment.status === 'Complete') {\n        const username = payment.player.name || payment.player.uuid;\n        if (!dailyTotals[username]) {\n          dailyTotals[username] = {\n            username: username,\n            uuid: payment.player.uuid,\n            total: 0\n          };\n        }\n        dailyTotals[username].total += payment.price;\n      }\n    });\n    \n    const topCustomer = Object.values(dailyTotals).sort((a, b) => b.total - a.total)[0];\n    \n    if (topCustomer) {\n      cachedTopCustomer = {\n        username: topCustomer.username,\n        amount: topCustomer.total,\n        uuid: topCustomer.uuid\n      };\n    } else {\n      cachedTopCustomer = null;\n    }\n    \n    topCustomerLastFetch = now;\n    return cachedTopCustomer;\n  } catch (error) {\n    console.error('Top customer fetch error:', error);\n    return null;\n  }\n}\n\nexport default defineConfig({\n  server: {\n    host: '0.0.0.0',\n    port: 5000,\n    allowedHosts: true\n  },\n  plugins: [\n    {\n      name: 'api-routes',\n      configureServer(server) {\n        server.middlewares.use(async (req, res, next) => {\n          if (req.url === '/api/config') {\n            res.setHeader('Content-Type', 'application/json');\n            res.statusCode = 200;\n            res.end(JSON.stringify(config.public));\n            return;\n          }\n          \n          if (req.url === '/api/server-status') {\n            res.setHeader('Content-Type', 'application/json');\n            res.statusCode = 200;\n            try {\n              const status = await getServerStatus();\n              res.end(JSON.stringify(status));\n            } catch (error) {\n              console.error('Server status error:', error);\n              res.end(JSON.stringify({\n                online: false,\n                players: { online: 0, max: 0 },\n                error: error.message\n              }));\n            }\n            return;\n          }\n          \n          if (req.url === '/api/giftcards/validate' && req.method === 'POST') {\n            res.setHeader('Content-Type', 'application/json');\n            let body = '';\n            req.on('data', chunk => body += chunk);\n            req.on('end', async () => {\n              try {\n                const { code } = JSON.parse(body);\n                if (!code) {\n                  res.statusCode = 400;\n                  res.end(JSON.stringify({ error: 'Gift card code is required' }));\n                  return;\n                }\n                const result = await validateGiftCard(code);\n                res.statusCode = 200;\n                res.end(JSON.stringify(result));\n              } catch (error) {\n                console.error('Gift card validation error:', error);\n                res.statusCode = 500;\n                res.end(JSON.stringify({ valid: false, error: 'Server error' }));\n              }\n            });\n            return;\n          }\n          \n          if (req.url === '/api/cart/calculate' && req.method === 'POST') {\n            res.setHeader('Content-Type', 'application/json');\n            let body = '';\n            req.on('data', chunk => body += chunk);\n            req.on('end', async () => {\n              try {\n                const { packages } = JSON.parse(body);\n                if (!packages || !Array.isArray(packages)) {\n                  res.statusCode = 400;\n                  res.end(JSON.stringify({ error: 'Packages array is required' }));\n                  return;\n                }\n                const result = await calculateCartTotal(packages);\n                if (result) {\n                  res.statusCode = 200;\n                  res.end(JSON.stringify(result));\n                } else {\n                  res.statusCode = 500;\n                  res.end(JSON.stringify({ error: 'Failed to calculate total' }));\n                }\n              } catch (error) {\n                console.error('Cart calculation error:', error);\n                res.statusCode = 500;\n                res.end(JSON.stringify({ error: 'Server error' }));\n              }\n            });\n            return;\n          }\n          \n          if (req.url === '/api/top-customer') {\n            res.setHeader('Content-Type', 'application/json');\n            res.statusCode = 200;\n            try {\n              const topCustomer = await getTopCustomer();\n              res.end(JSON.stringify(topCustomer || {}));\n            } catch (error) {\n              console.error('Top customer fetch error:', error);\n              res.end(JSON.stringify({}));\n            }\n            return;\n          }\n          \n          next();\n        });\n      }\n    }\n  ],\n  build: {\n    outDir: 'dist',\n    rollupOptions: {\n      input: {\n        main: resolve(__dirname, 'index.html'),\n        success: resolve(__dirname, 'template/pages/success.html'),\n        cancel: resolve(__dirname, 'template/pages/cancel.html')\n      }\n    }\n  }\n});\n","size_bytes":10150},"template/scripts/main.js":{"content":"import Tebex from '@tebexio/tebex.js';\n\nconst API_BASE = 'https://headless.tebex.io/api';\n\nlet appConfig = null;\nlet cart = [];\nlet currentBasket = null;\nlet checkoutHandlersRegistered = false;\nlet currentUser = null;\nlet serverType = 'java';\nlet isGiftPurchase = false;\nlet giftRecipient = '';\n\nconst packageIconFallbacks = ['üíé', '‚öîÔ∏è', 'üèÜ', 'üëë', 'üéÅ', 'üî•', '‚≠ê', 'üéØ'];\nconst iconColors = ['purple', 'orange', 'lime', 'blue', 'red'];\nconst categoryIcons = ['‚öîÔ∏è', 'üíé', 'üèÜ', 'üëë', 'üéÅ', 'üî•', '‚≠ê', 'üéØ', 'üõ°Ô∏è', 'üó°Ô∏è'];\nlet currentView = 'categories';\nlet allCategories = [];\n\nlet discordCache = { count: null, timestamp: 0 };\nconst DISCORD_CACHE_DURATION = 5 * 60 * 1000;\n\nclass ThemeManager {\n  constructor() {\n    this.effectsContainer = document.getElementById('themeEffects');\n    this.activeEffects = [];\n    this.animationFrame = null;\n  }\n\n  activate(theme) {\n    this.clear();\n    document.body.className = '';\n    \n    if (theme.enableHalloween) {\n      document.body.classList.add('theme-halloween');\n      this.createHalloweenEffects();\n    } else if (theme.enableChristmas) {\n      document.body.classList.add('theme-christmas');\n      this.createChristmasEffects();\n    }\n  }\n\n  createHalloweenEffects() {\n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n    if (prefersReducedMotion) return;\n\n    const particleCount = 15;\n    for (let i = 0; i < particleCount; i++) {\n      setTimeout(() => {\n        this.createHalloweenParticle();\n      }, i * 300);\n    }\n  }\n\n  createHalloweenParticle() {\n    const particle = document.createElement('div');\n    particle.className = 'halloween-particle';\n    const emojis = ['ü¶á', 'üëª', 'üéÉ', 'üï∑Ô∏è'];\n    particle.innerHTML = `<span class=\"halloween-bat\">${emojis[Math.floor(Math.random() * emojis.length)]}</span>`;\n    particle.style.left = `${Math.random() * 100}%`;\n    particle.style.animationDuration = `${8 + Math.random() * 4}s`;\n    particle.style.animationDelay = `${Math.random() * 2}s`;\n    this.effectsContainer.appendChild(particle);\n    this.activeEffects.push(particle);\n\n    setTimeout(() => {\n      if (particle.parentNode) {\n        particle.remove();\n      }\n      this.createHalloweenParticle();\n    }, (8 + Math.random() * 4) * 1000);\n  }\n\n  createChristmasEffects() {\n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n    if (prefersReducedMotion) return;\n\n    const snowflakeCount = 30;\n    for (let i = 0; i < snowflakeCount; i++) {\n      setTimeout(() => {\n        this.createSnowflake();\n      }, i * 150);\n    }\n  }\n\n  createSnowflake() {\n    const snowflake = document.createElement('div');\n    snowflake.className = 'snowflake';\n    const snowTypes = ['‚ùÑ', '‚ùÖ', '‚ùÜ', '‚úª', '‚úº'];\n    snowflake.textContent = snowTypes[Math.floor(Math.random() * snowTypes.length)];\n    snowflake.style.left = `${Math.random() * 100}%`;\n    snowflake.style.animationDuration = `${5 + Math.random() * 5}s`;\n    snowflake.style.animationDelay = `${Math.random() * 2}s`;\n    snowflake.style.fontSize = `${0.8 + Math.random() * 0.8}rem`;\n    this.effectsContainer.appendChild(snowflake);\n    this.activeEffects.push(snowflake);\n\n    setTimeout(() => {\n      if (snowflake.parentNode) {\n        snowflake.remove();\n      }\n      this.createSnowflake();\n    }, (5 + Math.random() * 5) * 1000);\n  }\n\n  clear() {\n    this.activeEffects.forEach(effect => {\n      if (effect.parentNode) {\n        effect.remove();\n      }\n    });\n    this.activeEffects = [];\n    if (this.effectsContainer) {\n      this.effectsContainer.innerHTML = '';\n    }\n  }\n}\n\nconst themeManager = new ThemeManager();\n\nfunction formatUsernameForServer(username, type = 'java') {\n  if (!username) return username;\n  username = username.trim();\n  \n  if (type === 'bedrock') {\n    if (!username.startsWith('.')) {\n      return '.' + username;\n    }\n  } else if (type === 'java') {\n    if (username.startsWith('.')) {\n      return username.substring(1);\n    }\n  }\n  \n  return username;\n}\n\nfunction debounce(func, wait) {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\nasync function loadConfig() {\n  try {\n    const response = await fetch('/api/config');\n    if (!response.ok) {\n      throw new Error('Failed to load configuration');\n    }\n    appConfig = await response.json();\n    console.log('Configuration loaded:', appConfig);\n    return appConfig;\n  } catch (error) {\n    console.error('Config load error:', error);\n    throw error;\n  }\n}\n\nfunction applyConfig() {\n  if (!appConfig) return;\n  \n  document.querySelector('#storeName').textContent = appConfig.storeName;\n  document.querySelector('#serverIp').textContent = appConfig.serverIp;\n  \n  const bgElement = document.querySelector('.background-image');\n  if (bgElement && appConfig.assets.backgroundImage) {\n    bgElement.style.backgroundImage = `url('${appConfig.assets.backgroundImage}')`;\n  }\n  \n  const logoImg = document.querySelector('#storeLogo');\n  if (logoImg && appConfig.assets.logo) {\n    logoImg.src = appConfig.assets.logo;\n  }\n  \n  if (appConfig.theme) {\n    themeManager.activate(appConfig.theme);\n  }\n}\n\nasync function fetchDiscordMemberCount() {\n  try {\n    if (!appConfig || !appConfig.discordId || appConfig.discordId === 'YourDiscordServer') {\n      document.getElementById('discordCount').textContent = '';\n      return;\n    }\n    \n    const now = Date.now();\n    if (discordCache.count !== null && (now - discordCache.timestamp) < DISCORD_CACHE_DURATION) {\n      document.getElementById('discordCount').textContent = `(${discordCache.count.toLocaleString()})`;\n      return;\n    }\n    \n    const response = await fetch(`https://discord.com/api/v10/invites/${appConfig.discordId}?with_counts=true`);\n    if (!response.ok) throw new Error('Failed to fetch Discord data');\n    \n    const data = await response.json();\n    const memberCount = data.approximate_member_count || 0;\n    \n    discordCache = { count: memberCount, timestamp: now };\n    document.getElementById('discordCount').textContent = `(${memberCount.toLocaleString()})`;\n  } catch (error) {\n    console.error('Discord fetch error:', error);\n    document.getElementById('discordCount').textContent = '';\n  }\n}\n\nfunction loadUserSession() {\n  try {\n    const savedServerType = localStorage.getItem('server_type');\n    if (savedServerType && (savedServerType === 'java' || savedServerType === 'bedrock')) {\n      serverType = savedServerType;\n      updateServerTypeUI();\n    }\n    \n    const savedUser = localStorage.getItem('tebex_user');\n    if (savedUser) {\n      currentUser = JSON.parse(savedUser);\n      updateLoginUI();\n    }\n  } catch (error) {\n    console.error('Session load error:', error);\n    localStorage.removeItem('tebex_user');\n  }\n}\n\nfunction updateServerTypeUI() {\n  document.querySelectorAll('.modal-server-type-btn').forEach(btn => {\n    if (btn.dataset.type === serverType) {\n      btn.classList.add('active');\n    } else {\n      btn.classList.remove('active');\n    }\n  });\n}\n\nfunction saveUserSession(username) {\n  const userData = {\n    username: username,\n    loginDate: new Date().toISOString()\n  };\n  currentUser = userData;\n  localStorage.setItem('tebex_user', JSON.stringify(userData));\n  updateLoginUI();\n}\n\nfunction logoutUser() {\n  currentUser = null;\n  localStorage.removeItem('tebex_user');\n  updateLoginUI();\n  showNotification('Logged out successfully');\n}\n\nfunction updateLoginUI() {\n  const loginButton = document.getElementById('loginButton');\n  const loginText = document.getElementById('loginText');\n  \n  if (currentUser) {\n    loginButton.classList.add('logged-in');\n    const displayUsername = formatUsernameForServer(currentUser.username, serverType);\n    loginText.textContent = displayUsername;\n  } else {\n    loginButton.classList.remove('logged-in');\n    loginText.textContent = 'Login';\n  }\n}\n\nfunction showLogoutModal() {\n  return new Promise((resolve, reject) => {\n    const modal = document.getElementById('logoutModal');\n    const usernameSpan = document.getElementById('logoutUsername');\n    const confirmBtn = document.getElementById('logoutConfirmBtn');\n    const cancelBtn = document.getElementById('logoutCancelBtn');\n    const closeBtn = document.getElementById('closeLogoutModal');\n    \n    const displayUsername = formatUsernameForServer(currentUser.username, serverType);\n    usernameSpan.textContent = displayUsername;\n    modal.style.display = 'flex';\n    \n    const handleConfirm = () => {\n      cleanup();\n      modal.style.display = 'none';\n      resolve(true);\n    };\n    \n    const handleCancel = () => {\n      cleanup();\n      modal.style.display = 'none';\n      resolve(false);\n    };\n    \n    const handleKeyPress = (e) => {\n      if (e.key === 'Escape') {\n        handleCancel();\n      }\n    };\n    \n    const cleanup = () => {\n      confirmBtn.removeEventListener('click', handleConfirm);\n      cancelBtn.removeEventListener('click', handleCancel);\n      closeBtn.removeEventListener('click', handleCancel);\n      document.removeEventListener('keydown', handleKeyPress);\n      modal.removeEventListener('click', handleModalClick);\n    };\n    \n    const handleModalClick = (e) => {\n      if (e.target.id === 'logoutModal') {\n        handleCancel();\n      }\n    };\n    \n    confirmBtn.addEventListener('click', handleConfirm);\n    cancelBtn.addEventListener('click', handleCancel);\n    closeBtn.addEventListener('click', handleCancel);\n    document.addEventListener('keydown', handleKeyPress);\n    modal.addEventListener('click', handleModalClick);\n  });\n}\n\nfunction showProductDescriptionModal(pkg) {\n  const modal = document.getElementById('productDescModal');\n  const title = document.getElementById('productDescTitle');\n  const content = document.getElementById('productDescContent');\n  const closeBtn = document.getElementById('closeProductDescModal');\n  const closeBottomBtn = document.getElementById('productDescCloseBtn');\n  \n  title.textContent = pkg.name;\n  \n  const description = pkg.description || 'No description available.';\n  content.innerHTML = description.replace(/\\n/g, '<br>');\n  \n  modal.style.display = 'flex';\n  \n  const handleClose = () => {\n    cleanup();\n    modal.style.display = 'none';\n  };\n  \n  const handleKeyPress = (e) => {\n    if (e.key === 'Escape') {\n      handleClose();\n    }\n  };\n  \n  const cleanup = () => {\n    closeBtn.removeEventListener('click', handleClose);\n    closeBottomBtn.removeEventListener('click', handleClose);\n    document.removeEventListener('keydown', handleKeyPress);\n    modal.removeEventListener('click', handleModalClick);\n  };\n  \n  const handleModalClick = (e) => {\n    if (e.target.id === 'productDescModal') {\n      handleClose();\n    }\n  };\n  \n  closeBtn.addEventListener('click', handleClose);\n  closeBottomBtn.addEventListener('click', handleClose);\n  document.addEventListener('keydown', handleKeyPress);\n  modal.addEventListener('click', handleModalClick);\n}\n\nfunction showUsernameModal() {\n  return new Promise((resolve, reject) => {\n    const modal = document.getElementById('usernameModal');\n    const input = document.getElementById('usernameInput');\n    const submitBtn = document.getElementById('usernameSubmitBtn');\n    const cancelBtn = document.getElementById('usernameCancelBtn');\n    const closeBtn = document.getElementById('closeUsernameModal');\n    const serverTypeBtns = modal.querySelectorAll('.modal-server-type-btn');\n    \n    if (currentUser && currentUser.username) {\n      input.value = currentUser.username;\n    } else {\n      input.value = '';\n    }\n    \n    updateServerTypeUI();\n    modal.style.display = 'flex';\n    setTimeout(() => input.focus(), 100);\n    \n    const handleServerTypeClick = (e) => {\n      const btn = e.currentTarget;\n      const type = btn.dataset.type;\n      if (type !== serverType) {\n        serverType = type;\n        localStorage.setItem('server_type', serverType);\n        updateServerTypeUI();\n      }\n    };\n    \n    serverTypeBtns.forEach(btn => {\n      btn.addEventListener('click', handleServerTypeClick);\n    });\n    \n    const handleSubmit = () => {\n      let username = input.value.trim();\n      if (!username) {\n        input.style.borderColor = '#ef4444';\n        setTimeout(() => input.style.borderColor = '', 300);\n        return;\n      }\n      \n      username = formatUsernameForServer(username, serverType);\n      \n      cleanup();\n      modal.style.display = 'none';\n      resolve(username);\n    };\n    \n    const handleCancel = () => {\n      cleanup();\n      modal.style.display = 'none';\n      reject(new Error('Username input cancelled'));\n    };\n    \n    const handleKeyPress = (e) => {\n      if (e.key === 'Enter') {\n        handleSubmit();\n      } else if (e.key === 'Escape') {\n        handleCancel();\n      }\n    };\n    \n    const cleanup = () => {\n      submitBtn.removeEventListener('click', handleSubmit);\n      cancelBtn.removeEventListener('click', handleCancel);\n      closeBtn.removeEventListener('click', handleCancel);\n      input.removeEventListener('keypress', handleKeyPress);\n      modal.removeEventListener('click', handleModalClick);\n      serverTypeBtns.forEach(btn => {\n        btn.removeEventListener('click', handleServerTypeClick);\n      });\n    };\n    \n    const handleModalClick = (e) => {\n      if (e.target.id === 'usernameModal') {\n        handleCancel();\n      }\n    };\n    \n    submitBtn.addEventListener('click', handleSubmit);\n    cancelBtn.addEventListener('click', handleCancel);\n    closeBtn.addEventListener('click', handleCancel);\n    input.addEventListener('keypress', handleKeyPress);\n    modal.addEventListener('click', handleModalClick);\n  });\n}\n\nasync function fetchServerStatus() {\n  try {\n    const response = await fetch('/api/server-status');\n    const status = await response.json();\n    \n    const statusDot = document.getElementById('statusDot');\n    const playerCount = document.getElementById('playerCount');\n    \n    if (status.online) {\n      statusDot.style.background = 'var(--lime-primary)';\n      statusDot.style.boxShadow = '0 0 10px var(--lime-glow)';\n      playerCount.textContent = `${status.players.online}/${status.players.max} online`;\n    } else {\n      statusDot.style.background = '#ef4444';\n      statusDot.style.boxShadow = '0 0 10px rgba(239, 68, 68, 0.6)';\n      playerCount.textContent = 'Offline';\n    }\n  } catch (error) {\n    console.error('Server status fetch error:', error);\n    document.getElementById('playerCount').textContent = '';\n  }\n}\n\nasync function fetchCategories() {\n  try {\n    const response = await fetch(`${API_BASE}/accounts/${appConfig.tebex.publicToken}/categories?includePackages=1`, {\n      headers: {\n        'Accept': 'application/json'\n      }\n    });\n    \n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error('API Error:', errorText);\n      throw new Error(`Failed to fetch categories: ${response.status} ${response.statusText}`);\n    }\n    \n    const data = await response.json();\n    return data.data || [];\n  } catch (error) {\n    console.error('Error fetching categories:', error);\n    throw error;\n  }\n}\n\nasync function createBasket(username) {\n  try {\n    const completeUrl = window.location.origin + appConfig.urls.completeUrl;\n    const cancelUrl = window.location.origin + appConfig.urls.cancelUrl;\n    \n    const basketData = {\n      complete_url: completeUrl,\n      cancel_url: cancelUrl,\n      complete_auto_redirect: true\n    };\n    \n    if (username) {\n      basketData.username = username;\n    }\n    \n    const response = await fetch(`${API_BASE}/accounts/${appConfig.tebex.publicToken}/baskets`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify(basketData)\n    });\n    \n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error('Basket creation error:', errorText);\n      throw new Error(`Failed to create basket: ${response.status} ${response.statusText}`);\n    }\n    \n    const data = await response.json();\n    console.log('Basket created:', data);\n    return data.data;\n  } catch (error) {\n    console.error('Error creating basket:', error);\n    throw error;\n  }\n}\n\nasync function addPackageToBasket(basketIdent, packageId, quantity = 1) {\n  try {\n    const response = await fetch(`${API_BASE}/baskets/${basketIdent}/packages`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({\n        package_id: packageId,\n        quantity: quantity\n      })\n    });\n    \n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error('Add package error:', errorText);\n      throw new Error(`Failed to add package: ${response.status} ${response.statusText}`);\n    }\n    \n    const data = await response.json();\n    console.log('Package added:', data);\n    return data;\n  } catch (error) {\n    console.error('Error adding package to basket:', error);\n    throw error;\n  }\n}\n\nfunction renderCategories(categories) {\n  allCategories = categories;\n  const container = document.getElementById('categoriesContainer');\n  container.innerHTML = '';\n  \n  if (categories.length === 0) {\n    container.innerHTML = '<p class=\"error-state\">No packages available at the moment.</p>';\n    return;\n  }\n\n  const backButton = document.getElementById('backToCategoriesBtn');\n  if (backButton) {\n    backButton.style.display = 'none';\n  }\n  \n  currentView = 'categories';\n  let categoryIndex = 0;\n  \n  categories.forEach(category => {\n    if (!category.packages || category.packages.length === 0) return;\n    \n    const iconFallback = categoryIcons[categoryIndex % categoryIcons.length];\n    const iconColor = iconColors[categoryIndex % iconColors.length];\n    categoryIndex++;\n    \n    const categoryEl = document.createElement('div');\n    categoryEl.className = 'category-card glass-card';\n    categoryEl.dataset.categoryId = category.id;\n    \n    categoryEl.innerHTML = `\n      <div class=\"category-icon ${iconColor}\">${iconFallback}</div>\n      <h3 class=\"category-name\">${category.name}</h3>\n      <p class=\"category-description\">${category.packages.length} Package${category.packages.length !== 1 ? 's' : ''}</p>\n    `;\n    \n    categoryEl.addEventListener('click', () => {\n      renderPackages(category);\n    });\n    \n    container.appendChild(categoryEl);\n  });\n}\n\nfunction renderPackages(category) {\n  const container = document.getElementById('categoriesContainer');\n  container.innerHTML = '';\n  currentView = 'packages';\n  \n  const backButton = document.getElementById('backToCategoriesBtn');\n  if (backButton) {\n    backButton.style.display = 'inline-flex';\n  }\n  \n  let packageIndex = 0;\n  category.packages.forEach(pkg => {\n    const iconFallback = packageIconFallbacks[packageIndex % packageIconFallbacks.length];\n    const iconColor = iconColors[packageIndex % iconColors.length];\n    packageIndex++;\n    \n    const packageEl = document.createElement('div');\n    packageEl.className = 'package-card glass-card';\n    packageEl.dataset.packageId = pkg.id;\n    \n    let imageHtml = '';\n    if (pkg.image) {\n      imageHtml = `\n        <img src=\"${pkg.image}\" \n             alt=\"${pkg.name}\" \n             class=\"package-image\"\n             loading=\"lazy\"\n             onerror=\"this.style.display='none'; this.nextElementSibling.style.display='block';\">\n        <div class=\"package-image-fallback ${iconColor}\" style=\"display:none;\">${iconFallback}</div>\n      `;\n    } else {\n      imageHtml = `<div class=\"package-icon ${iconColor}\">${iconFallback}</div>`;\n    }\n    \n    packageEl.innerHTML = `\n      <button class=\"package-info-btn\" title=\"View details\">i</button>\n      ${imageHtml}\n      <h3 class=\"package-name\">${pkg.name}</h3>\n      <p class=\"package-description\">${pkg.description || 'Enhance your gameplay experience'}</p>\n      <div class=\"package-price\">${formatPrice(pkg.base_price, pkg.currency)}</div>\n      <button class=\"add-to-cart-btn\" data-package='${JSON.stringify({\n        id: pkg.id,\n        name: pkg.name,\n        price: pkg.base_price,\n        currency: pkg.currency\n      }).replace(/'/g, \"&apos;\")}'>\n        Buy Now\n      </button>\n    `;\n    \n    const infoBtn = packageEl.querySelector('.package-info-btn');\n    infoBtn.addEventListener('click', (e) => {\n      e.stopPropagation();\n      showProductDescriptionModal(pkg);\n    });\n    \n    container.appendChild(packageEl);\n  });\n  \n  document.querySelectorAll('.add-to-cart-btn').forEach(btn => {\n    btn.addEventListener('click', (e) => {\n      e.stopPropagation();\n      const packageData = JSON.parse(btn.dataset.package);\n      addToCart(packageData);\n    });\n  });\n}\n\nfunction formatPrice(price, currency) {\n  const symbols = {\n    'USD': '$',\n    'EUR': '‚Ç¨',\n    'GBP': '¬£',\n  };\n  const symbol = symbols[currency] || currency;\n  return `${symbol}${parseFloat(price).toFixed(2)}`;\n}\n\nfunction addToCart(packageData) {\n  cart.push(packageData);\n  currentBasket = null;\n  updateCartUI();\n  \n  const count = cart.filter(item => item.id === packageData.id).length;\n  if (count > 1) {\n    showNotification(`${packageData.name} added to cart (x${count})!`);\n  } else {\n    showNotification(`${packageData.name} added to cart!`);\n  }\n}\n\nfunction removeFromCart(packageId) {\n  const index = cart.findIndex(item => item.id === packageId);\n  if (index > -1) {\n    const removedItem = cart.splice(index, 1)[0];\n    const remaining = cart.filter(item => item.id === packageId).length;\n    \n    currentBasket = null;\n    updateCartUI();\n    renderCart();\n    \n    if (remaining > 0) {\n      showNotification(`${removedItem.name} removed (${remaining} remaining)`);\n    } else {\n      showNotification(`${removedItem.name} removed from cart`);\n    }\n  }\n}\n\nfunction updateCartUI() {\n  document.getElementById('cartCount').textContent = cart.length;\n}\n\nasync function renderCart() {\n  const cartItemsContainer = document.getElementById('cartItems');\n  const cartTotalEl = document.getElementById('cartTotal');\n  \n  if (cart.length === 0) {\n    cartItemsContainer.innerHTML = '<div class=\"empty-cart\">Your cart is empty</div>';\n    cartTotalEl.textContent = '$0.00';\n    document.getElementById('checkoutButton').disabled = true;\n    return;\n  }\n  \n  cartItemsContainer.innerHTML = cart.map(item => `\n    <div class=\"cart-item\">\n      <span class=\"cart-item-name\">${item.name}</span>\n      <span class=\"cart-item-price\">${formatPrice(item.price, item.currency)}</span>\n      <button class=\"remove-item\" data-id=\"${item.id}\">Remove</button>\n    </div>\n  `).join('');\n  \n  cartTotalEl.textContent = 'Calculating...';\n  document.getElementById('checkoutButton').disabled = false;\n  \n  try {\n    const packageCounts = {};\n    cart.forEach(item => {\n      packageCounts[item.id] = (packageCounts[item.id] || 0) + 1;\n    });\n    \n    const packages = Object.entries(packageCounts).map(([id, quantity]) => ({\n      id: parseInt(id),\n      quantity: quantity\n    }));\n    \n    const response = await fetch('/api/cart/calculate', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ packages })\n    });\n    \n    if (response.ok) {\n      const data = await response.json();\n      cartTotalEl.textContent = formatPrice(data.total, data.currency);\n    } else {\n      const total = cart.reduce((sum, item) => sum + parseFloat(item.price), 0);\n      const currency = cart[0]?.currency || 'USD';\n      cartTotalEl.textContent = formatPrice(total, currency);\n    }\n  } catch (error) {\n    console.error('Cart total calculation error:', error);\n    const total = cart.reduce((sum, item) => sum + parseFloat(item.price), 0);\n    const currency = cart[0]?.currency || 'USD';\n    cartTotalEl.textContent = formatPrice(total, currency);\n  }\n  \n  document.querySelectorAll('.remove-item').forEach(btn => {\n    btn.addEventListener('click', () => {\n      removeFromCart(parseInt(btn.dataset.id));\n    });\n  });\n}\n\nfunction showNotification(message) {\n  const notification = document.createElement('div');\n  notification.className = 'notification';\n  notification.textContent = message;\n  document.body.appendChild(notification);\n  \n  setTimeout(() => {\n    notification.style.animation = 'slideOut 0.3s ease';\n    setTimeout(() => notification.remove(), 300);\n  }, 2500);\n}\n\ndocument.getElementById('cartButton').addEventListener('click', () => {\n  document.getElementById('cartModal').style.display = 'flex';\n  renderCart();\n});\n\ndocument.getElementById('closeCart').addEventListener('click', () => {\n  document.getElementById('cartModal').style.display = 'none';\n});\n\ndocument.getElementById('cartModal').addEventListener('click', (e) => {\n  if (e.target.id === 'cartModal') {\n    document.getElementById('cartModal').style.display = 'none';\n  }\n});\n\ndocument.getElementById('backToCategoriesBtn').addEventListener('click', () => {\n  if (allCategories.length > 0) {\n    renderCategories(allCategories);\n  }\n});\n\ndocument.getElementById('checkGiftcardBtn').addEventListener('click', async () => {\n  const input = document.getElementById('giftcardInput');\n  const result = document.getElementById('giftcardResult');\n  const code = input.value.trim();\n  \n  if (!code) {\n    result.style.display = 'block';\n    result.className = 'giftcard-result error';\n    result.textContent = 'Please enter a gift card code.';\n    return;\n  }\n  \n  result.style.display = 'block';\n  result.className = 'giftcard-result';\n  result.textContent = 'Checking gift card...';\n  \n  try {\n    const response = await fetch('/api/giftcards/validate', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ code })\n    });\n    \n    const data = await response.json();\n    \n    if (data.valid) {\n      result.className = 'giftcard-result success';\n      result.textContent = `Valid! Balance: ${formatPrice(data.balance, data.currency)}`;\n    } else {\n      result.className = 'giftcard-result error';\n      result.textContent = data.error || 'Invalid gift card code.';\n    }\n  } catch (error) {\n    console.error('Gift card validation error:', error);\n    result.className = 'giftcard-result error';\n    result.textContent = 'Failed to validate gift card. Please try again.';\n  }\n});\n\nfunction registerCheckoutHandlers() {\n  if (checkoutHandlersRegistered) return;\n  \n  Tebex.checkout.on('payment:complete', (data) => {\n    console.log('Payment successful!', data);\n    cart = [];\n    currentBasket = null;\n    updateCartUI();\n    document.getElementById('cartModal').style.display = 'none';\n    showNotification('Thank you for your purchase!');\n  });\n  \n  Tebex.checkout.on('payment:cancelled', () => {\n    console.log('Payment cancelled by user');\n    currentBasket = null;\n    showNotification('Checkout cancelled');\n  });\n  \n  Tebex.checkout.on('checkout:closed', () => {\n    console.log('Checkout window closed');\n    currentBasket = null;\n  });\n  \n  Tebex.checkout.on('checkout:loaded', () => {\n    console.log('Checkout UI loaded successfully');\n  });\n  \n  checkoutHandlersRegistered = true;\n  console.log('Tebex checkout event handlers registered');\n}\n\ndocument.getElementById('checkoutButton').addEventListener('click', async () => {\n  if (cart.length === 0) return;\n  \n  const checkoutBtn = document.getElementById('checkoutButton');\n  const originalText = checkoutBtn.textContent;\n  \n  try {\n    if (isGiftPurchase && !giftRecipient) {\n      showNotification('Please enter recipient username for gift purchase');\n      document.getElementById('giftRecipientInput').focus();\n      return;\n    }\n    \n    const username = await showUsernameModal();\n    \n    if (!username || username.trim() === '') {\n      showNotification('Username is required for checkout');\n      return;\n    }\n    \n    if (currentUser && username) {\n      currentUser.username = username;\n      saveUserSession(username);\n    }\n    \n    checkoutBtn.textContent = 'Creating order...';\n    checkoutBtn.disabled = true;\n    \n    if (!appConfig || !appConfig.tebex || !appConfig.tebex.publicToken) {\n      throw new Error('Store configuration is not loaded. Please refresh the page.');\n    }\n    \n    const recipientUsername = isGiftPurchase ? formatUsernameForServer(giftRecipient, serverType) : username.trim();\n    \n    console.log('Creating fresh basket for current cart items...');\n    console.log('Is gift:', isGiftPurchase, 'Recipient:', recipientUsername);\n    currentBasket = await createBasket(recipientUsername);\n    \n    if (!currentBasket || !currentBasket.ident) {\n      throw new Error('Failed to create basket. Please check your Tebex configuration.');\n    }\n    \n    console.log('Basket created with ident:', currentBasket.ident);\n    \n    for (const item of cart) {\n      console.log('Adding package to basket:', item.id, item.name);\n      await addPackageToBasket(currentBasket.ident, item.id, 1);\n    }\n    \n    console.log('Initializing Tebex checkout with ident:', currentBasket.ident);\n    \n    registerCheckoutHandlers();\n    \n    Tebex.checkout.init({\n      ident: currentBasket.ident,\n      theme: 'dark',\n      colors: {\n        primary: '#84cc16'\n      }\n    });\n    \n    console.log('Launching Tebex checkout');\n    await new Promise(resolve => setTimeout(resolve, 500));\n    Tebex.checkout.launch();\n    \n    checkoutBtn.textContent = originalText;\n    checkoutBtn.disabled = false;\n    \n  } catch (error) {\n    if (error.message === 'Username input cancelled') {\n      console.log('User cancelled username input');\n      return;\n    }\n    \n    console.error('Checkout error details:', error);\n    let errorMessage = 'Failed to initiate checkout. ';\n    \n    if (error.message.includes('configuration') || error.message.includes('token')) {\n      errorMessage += 'Please check your store configuration.';\n    } else if (error.message.includes('basket')) {\n      errorMessage += 'Unable to create basket. Please try again.';\n    } else if (error.message.includes('login') || error.message.includes('auth')) {\n      errorMessage += 'Authentication required. Please ensure username is valid.';\n    } else {\n      errorMessage += 'Please try again or contact support.';\n    }\n    \n    showNotification(errorMessage);\n    checkoutBtn.textContent = originalText;\n    checkoutBtn.disabled = false;\n    \n    currentBasket = null;\n  }\n});\n\ndocument.getElementById('discordButton').addEventListener('click', () => {\n  if (appConfig && appConfig.discordLink) {\n    window.open(appConfig.discordLink, '_blank');\n  }\n});\n\ndocument.getElementById('loginButton').addEventListener('click', async () => {\n  if (currentUser) {\n    const shouldLogout = await showLogoutModal();\n    if (shouldLogout) {\n      logoutUser();\n    }\n  } else {\n    const modal = document.getElementById('loginModal');\n    const input = document.getElementById('loginUsernameInput');\n    const submitBtn = document.getElementById('loginSubmitBtn');\n    const cancelBtn = document.getElementById('loginCancelBtn');\n    const closeBtn = document.getElementById('closeLoginModal');\n    const serverTypeBtns = modal.querySelectorAll('.modal-server-type-btn');\n    \n    updateServerTypeUI();\n    modal.style.display = 'flex';\n    setTimeout(() => input.focus(), 100);\n    \n    const handleServerTypeClick = (e) => {\n      const btn = e.currentTarget;\n      const type = btn.dataset.type;\n      if (type !== serverType) {\n        serverType = type;\n        localStorage.setItem('server_type', serverType);\n        updateServerTypeUI();\n      }\n    };\n    \n    serverTypeBtns.forEach(btn => {\n      btn.addEventListener('click', handleServerTypeClick);\n    });\n    \n    const handleSubmit = () => {\n      const username = input.value.trim();\n      if (!username) {\n        input.style.borderColor = '#ef4444';\n        setTimeout(() => input.style.borderColor = '', 300);\n        return;\n      }\n      cleanup();\n      modal.style.display = 'none';\n      saveUserSession(username);\n      showNotification('Logged in successfully!');\n    };\n    \n    const handleCancel = () => {\n      cleanup();\n      modal.style.display = 'none';\n    };\n    \n    const handleKeyPress = (e) => {\n      if (e.key === 'Enter') {\n        handleSubmit();\n      } else if (e.key === 'Escape') {\n        handleCancel();\n      }\n    };\n    \n    const cleanup = () => {\n      submitBtn.removeEventListener('click', handleSubmit);\n      cancelBtn.removeEventListener('click', handleCancel);\n      closeBtn.removeEventListener('click', handleCancel);\n      input.removeEventListener('keypress', handleKeyPress);\n      modal.removeEventListener('click', handleModalClick);\n      serverTypeBtns.forEach(btn => {\n        btn.removeEventListener('click', handleServerTypeClick);\n      });\n    };\n    \n    const handleModalClick = (e) => {\n      if (e.target.id === 'loginModal') {\n        handleCancel();\n      }\n    };\n    \n    submitBtn.addEventListener('click', handleSubmit);\n    cancelBtn.addEventListener('click', handleCancel);\n    closeBtn.addEventListener('click', handleCancel);\n    input.addEventListener('keypress', handleKeyPress);\n    modal.addEventListener('click', handleModalClick);\n  }\n});\n\ndocument.getElementById('giftCheckbox').addEventListener('change', (e) => {\n  isGiftPurchase = e.target.checked;\n  const recipientSection = document.getElementById('giftRecipientSection');\n  \n  if (isGiftPurchase) {\n    recipientSection.style.display = 'block';\n  } else {\n    recipientSection.style.display = 'none';\n    giftRecipient = '';\n    document.getElementById('giftRecipientInput').value = '';\n  }\n});\n\ndocument.getElementById('giftRecipientInput').addEventListener('input', (e) => {\n  giftRecipient = e.target.value.trim();\n});\n\nasync function fetchTopCustomer() {\n  const topCustomerContent = document.getElementById('topCustomerContent');\n  \n  try {\n    const response = await fetch('/api/top-customer');\n    if (!response.ok) {\n      throw new Error('Failed to fetch top customer');\n    }\n    \n    const data = await response.json();\n    \n    if (data && data.username && typeof data.amount === 'number') {\n      const avatarUrl = `https://minotar.net/avatar/${data.username}/64`;\n      topCustomerContent.innerHTML = `\n        <div class=\"customer-item\">\n          <img src=\"${avatarUrl}\" alt=\"${data.username}\" class=\"customer-avatar\" onerror=\"this.src='https://minotar.net/avatar/steve/64'\">\n          <div class=\"customer-info\">\n            <span class=\"customer-name\">${data.username}</span>\n            <span class=\"customer-amount\">$${data.amount.toFixed(2)} USD</span>\n          </div>\n        </div>\n      `;\n    } else {\n      topCustomerContent.innerHTML = `\n        <div class=\"customer-item\">\n          <img src=\"https://minotar.net/avatar/steve/64\" alt=\"No data\" class=\"customer-avatar\">\n          <div class=\"customer-info\">\n            <span class=\"customer-name\">No purchases today</span>\n            <span class=\"customer-amount\">$0.00 USD</span>\n          </div>\n        </div>\n      `;\n    }\n  } catch (error) {\n    console.error('Top customer fetch error:', error);\n    topCustomerContent.innerHTML = `\n      <div class=\"customer-item\">\n        <img src=\"https://minotar.net/avatar/steve/64\" alt=\"Error\" class=\"customer-avatar\">\n        <div class=\"customer-info\">\n          <span class=\"customer-name\">Unable to load data</span>\n          <span class=\"customer-amount\">$0.00 USD</span>\n        </div>\n      </div>\n    `;\n  }\n}\n\nasync function init() {\n  try {\n    console.log('Loading application configuration...');\n    await loadConfig();\n    applyConfig();\n    \n    if (!appConfig.tebex.publicToken || appConfig.tebex.publicToken === 'your_tebex_public_token_here') {\n      throw new Error('Please configure your Tebex API token in app.config.js');\n    }\n    \n    loadUserSession();\n    \n    document.getElementById('loadingState').style.display = 'block';\n    document.getElementById('errorState').style.display = 'none';\n    \n    fetchServerStatus();\n    setInterval(fetchServerStatus, 60000);\n    \n    fetchDiscordMemberCount();\n    \n    fetchTopCustomer();\n    setInterval(fetchTopCustomer, 300000);\n    \n    console.log('Fetching categories from Tebex...');\n    const categories = await fetchCategories();\n    console.log('Categories loaded:', categories.length);\n    \n    document.getElementById('loadingState').style.display = 'none';\n    renderCategories(categories);\n    \n  } catch (error) {\n    console.error('Initialization error:', error);\n    document.getElementById('loadingState').style.display = 'none';\n    document.getElementById('errorState').style.display = 'block';\n    document.getElementById('errorState').querySelector('p').textContent = \n      error.message || 'Failed to load store. Please check your configuration.';\n  }\n}\n\ninit();\n","size_bytes":36920}},"version":2}